@import 'src/styles/site'
@import 'src/admin/admin.sass'

.Main
  display: flex
  flex-direction: row

.ComponentPreview
  position: relative
  overflow: hidden
  background: var(--admin-color-bg-muted)
  padding: 8px
  border-radius: 4px

.AdminPanel
  position: relative
  -webkit-user-select: none
  -ms-user-select: none
  user-select: none
  width: var(--admin-panel-width)
  height: 100vh//calc(100vh - size(32))
  overflow: hidden
  @extend %admin-panel
  z-index: 100
  border-right: 1px solid var(--admin-color-border)
  &.rightSide
    width: size(320)
    border-right: none
    border-left: 1px solid var(--admin-color-border)
  &.propEditor
    position: fixed
    top: var(--admin-space-0)
    right: var(--admin-space-0)
    width: size(296)
    border-right: none
    border-left: 1px solid var(--admin-color-border)
    box-shadow: -12px 0 24px -8px rgba(0,0,0,0.12)
  &.globalSettings
    // position: fixed
    top: var(--admin-space-0)
    right: var(--admin-space-0)
    z-index: 90
  &.phoneSettings
    position: fixed
    top: var(--admin-space-0)
    right: var(--admin-space-0)
    z-index: 95
  &.JsonPanel
    display: flex
    flex-direction: column
    background-color: var(--admin-color-bg-inset)
    color: var(--admin-color-text)
    .PanelHeader
      background-color: var(--admin-color-bg-inset)
      color: var(--admin-color-text)
      border-bottom: 1px solid var(--admin-color-border)
      .actions
        display: flex
        gap: size(4)
    .layoutJson
      flex: 1
      overflow-y: scroll
      padding: var(--admin-space-16)
    pre
      font-family: monospace
      font-size: var(--admin-font-s)
  .PanelHeader
    display: flex
    align-items: center
    justify-content: space-between
    padding: var(--admin-space-16)
    border-bottom: 1px solid var(--admin-color-border)
    height: size(48)
    background: var(--admin-color-bg-elevated)
    position: sticky
    z-index: 10000
    top: 0
    > div
      display: flex
      flex: 1
      align-items: center
      justify-content: space-between
      gap: size(8)
    h2
      @extend %medium
      font-size: var(--admin-font-xl)

.Tools
  display: flex
  flex-direction: column
  height: 100%
  width: 100%

.AvailableComponents
  display: flex
  flex-direction: column
  flex: 1 1 0
  min-height: 0
  overflow: hidden

.ComponentStack
  display: flex
  flex-direction: column
  flex: 1 1 0
  min-height: 0
  overflow-y: auto
  overflow-x: hidden
  padding: 0 var(--admin-space-16) var(--admin-space-16) var(--admin-space-16)
  gap: size(8)
  container-type: inline-size

  .grid
    container-type: inline-size
    display: grid
    grid-template-columns: 1fr
    gap: size(0)
    margin: 0 -size(4)

    @container (min-width: 280px)
      grid-template-columns: 1fr 1fr

    @container (min-width: 420px)
      column-gap: size(2)
      row-gap: size(8)
      grid-template-columns: 1fr 1fr 1fr

.CenterContainer
  position: relative
  flex: 1
  display: flex
  align-items: center
  justify-content: center
  height: 100vh
  gap: size(24)
  @extend %patterned-background-shapes
  background-color: var(--admin-color-bg-muted)

.PhonePreview
  position: relative
  width: var(--view-width)
  height: var(--view-height)
  background: var(--semantic-background-app)
  border: 8px solid var(--admin-color-text)
  border-radius: 40px
  overflow: hidden
  display: flex
  flex-direction: column
  // padding-top: $view-offset-top
  box-shadow: rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px
  transition: outline, transform 0.2s
  will-change: transform, box-shadow

.PhonePreviewDragOver
  outline: 8px solid var(--admin-highlight)
  transform: scale(1.02)

.PagePreview
  width: 100%
  height: 100%
  flex: 1
  overflow-y: scroll
  display: flex
  flex-direction: column
  padding-bottom: $view-offset-base
  padding-top: size(47)
  &.offset
    padding-top: size(99)

.DroppedCard
  border-radius: 8px
  //background: var(--semantic-background-app)
  position: relative
  transition: box-shadow 0.2s
  cursor: grab
  position: relative
  &::after
    content: ""
    position: absolute
    top: 0
    left: size(8)
    right: size(8)
    bottom: 0
    //border: 3px solid $light-gray
    background: var(--component-highlight)
    border-radius: size(8)
    display: none
  &:hover
    &::after
      display: block

.DroppedStack > div
  cursor: grab

.DroppedStack > div:active
  cursor: grabbing

.DragOver
  position: relative
  background: var(--component-highlight)
  //border: 3px dashed var(--admin-color-accent)
  &:after
    content: ""
    position: absolute
    top: 0
    left: 0
    right: 0
    bottom: 0
    border-radius: size(8)
    display: block !important
    border: 2px dashed var(--admin-color-accent)
    z-index: 10000

.PanelBox
  border-top: 1px solid var(--admin-color-border)
  h4
    @extend %bold
    font-size: var(--admin-font-l)
    margin-bottom: size(24)

.FlexRowSpaceBetween
  display: flex
  justify-content: space-between
  align-items: center
  margin-bottom: 12px

.Input
  margin: size(8) 0
  width: 100%
  input, select
    @extend %input-field
  label
    @extend %input-label

.LabelRow
  display: flex
  width: 100%
  align-items: center
  gap: 8px
  cursor: pointer
  label
    flex: 1

.EmptyState
  color: var(--admin-color-text-subtle)
  font-style: italic
  text-align: center
  padding: 16px

.Selected
  &:after
    border: 2px solid var(--admin-color-accent)
    display: block

.Dragged
  opacity: 0.5

.DuplicateCursor
  cursor: copy !important

.ComponentNameOverlay
  position: absolute
  top: size(4)
  right: size(12)
  background: var(--admin-overlay-strong)
  color: var(--admin-text-button)
  padding: size(4) size(8)
  border-radius: size(4)
  font-size: var(--admin-font-s)
  @extend %medium
  text-align: center
  z-index: 1000

.PropEditor
  height: 100%
  overflow-y: scroll
  .Fields
    padding: 0 var(--admin-space-16) size(80) var(--admin-space-16)

.Editor
  height: 100%

.ArrayOptionsHeader
  display: flex
  align-items: center
  justify-content: space-between
  padding: size(16) 0 size(8) 0
  h3
    @extend %bold
    font-size: var(--admin-font-l)
// ArrayEditor item box

.ArrayItemBox
  border: 1px solid var(--admin-color-border)
  border-radius: 8px
  margin-bottom: 16px
  background: var(--admin-color-bg-elevated)
  .content
    padding: size(8) size(16)
    border-top: 1px solid var(--admin-color-border)
  &:not(&.Open)
    header:hover
      background: var(--admin-color-bg-muted)
  header
    display: flex
    align-items: center
    justify-content: space-between
    padding: 8px 8px 8px 16px
  .HeaderTitle
    display: flex
    align-items: center
    gap: size(8)
  .chevron
    transition: transform 0.2s ease
    transform: rotate(-90deg)
    transform-origin: center center
    &.open
      transform: rotate(0deg)
  h4
    @extend %bold
    font-size: var(--admin-font-m)

.ToolBar
  display: flex
  justify-content: space-between
  align-items: center
  gap: size(4)
  padding: size(8)
  border-bottom: 1px solid var(--admin-color-border)
  > div
    display: flex
    justify-content: space-between
    align-items: center
    gap: size(4)

.AdminToggle
  position: fixed
  top: size(8)
  left: size(8)
  background: var(--admin-color-bg-muted)
  border-radius: size(8)
  z-index: 200

.Controls
  flex: 1

.SearchTemplate
  padding: size(0) var(--admin-space-16)
  display: flex
  align-items: center
  gap: size(8)

.ToastContainer
  position: absolute
  bottom: size(32)
  left: 0
  right: 0

.TopBar
  position: absolute
  top: 0
  left: 0
  right: 0

.resizing
  // This class is added when hovering or dragging the resize edge
  // The border color is set inline, but you can add more feedback here if desired
  box-shadow: 0 0 0 2px #00C24433 inset
  transition: box-shadow 0.15s